





top命令是Linux下==常用的性能分析工具==，能够==实时显示系统中各个进程的资源占用状况==，类似于Windows的任务管理器。top显示系统当前的进程和其他状况，是一==个动态显示过程，可以自动或者通过用户按键来不断刷新当前状态==。如果在前台执行该命令，它将独占前台,直到用户终止该程序为止.。比较准确的说，top命令提供了实时的对系统处理器的状态监控，显示系统中CPU最“敏感”的任务列表。==top命令可以按CPU使用、内存使用和执行时间对任务进行排序==。而且该命令的很多特性都可以通过交互式命令或者在个人定制文件中进行设定.。

# 2 top输出结果的含义

下面详细介绍它的使用方法。
 对于一个新手来说，如果从来没有使用过top命令，在命令行模式下直接输入top，可以查看到当前所有进程的信息。



```csharp
[root@localhost ~]# top
```

![img](https:////upload-images.jianshu.io/upload_images/8493217-00f2932408539640.png?imageMogr2/auto-orient/strip|imageView2/2/w/1011/format/webp)

图1  直接输入top命令的显示效果



输出结果中，有很多指标。下面介绍各个指标都代表什么含义。

## 2.1 统计信息区前五行

top命令输出结果中，统计信息区==前五行是系统整体的统计信息==。
 第一行是==任务队列信息==，同 uptime 命令的执行结果。其内容如下：

| 符号                           | 含义                                                         |
| :----------------------------- | :----------------------------------------------------------- |
| 18:52:04                       | 当前时间                                                     |
| up 10days, 3:49                | 系统运行时间，格式为：天，时:分                              |
| 1 user                         | 当前登录用户数                                               |
| load average: 0.00, 0.01, 0.05 | 系统负载，即任务队列的平均长度。三个数值分别为 1分钟、5分钟、15分钟前到现在的平均值 |

第二、三行为进程和CPU的信息。当有多个CPU时，这些内容可能会超过两行。内容如下：

|   符号   | 含义                                          |
| :------: | :-------------------------------------------- |
|  total   | 进程总数                                      |
| running  | 正在运行的进程数                              |
| sleeping | 睡眠的进程数                                  |
| stopped  | 停止的进程数                                  |
|  zombie  | 僵尸进程数                                    |
| %Cpu(s)  |                                               |
|  0.0 us  | 用户空间占用CPU百分比                         |
|  0.1 sy  | 内核空间占用CPU百分比                         |
|  0.0 ni  | 用户进程空间内改变过优先级的进程占用CPU百分比 |
| 98.7 id  | 空闲CPU百分比;                                |
|  0.0 wa  | 等待输入输出的CPU时间百分比                   |
|  0.0 hi  | 硬件CPU中断占用百分比                         |
|  0.0 si  | 软中断占用百分比                              |
|  0.0 st  | 虚拟机占用百分比                              |

最后两行为内存信息。内容如下：

|         符号         | 含义                                                         |
| :------------------: | :----------------------------------------------------------- |
|       KiB Mem        |                                                              |
|    7993560 total     | 物理内存总量                                                 |
|     207064 free      | 空闲内存总量                                                 |
|     723688 used      | 使用的物理内存总量                                           |
| 7062808 buffer/cache | 用作内核缓存的内存量                                         |
|       KiB Swap       |                                                              |
|    8257532 total     | 交换区总量                                                   |
|     8257356 free     | 空闲交换区总量                                               |
|       176 used       | 使用的交换区总量                                             |
|  6479580  avail Mem  | 缓冲的交换区总量,内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖，该数值即为这些内容已存在于内存中的交换区的大小,相应的内存再次被换出时可不必再对交换区写入 |

进程信息区统计信息区域的下方显示了各个进程的详细信息。首先来认识一下各列的含义。

| 序号 | 列名    | 含义                                                         |
| :--: | :------ | :----------------------------------------------------------- |
|  a   | PID     | 进程id                                                       |
|  b   | PPID    | 父进程id                                                     |
|  c   | RUSER   | Real user name                                               |
|  d   | UID     | 进程所有者的用户id                                           |
|  e   | USER    | 进程所有者的用户名                                           |
|  f   | GROUP   | 进程所有者的组名                                             |
|  g   | TTY     | 启动进程的终端名。不是从终端启动的进程则显示为 ?             |
|  h   | PR      | 优先级                                                       |
|  i   | NI      | nice值。负值表示高优先级，正值表示低优先级                   |
|  j   | P       | 最后使用的CPU，仅在多CPU环境下有意义                         |
|  k   | %CPU    | 上次更新到现在的CPU时间占用百分比                            |
|  l   | TIME    | 进程使用的CPU时间总计，单位秒                                |
|  m   | TIME+   | 进程使用的CPU时间总计，单位1/100秒                           |
|  n   | %MEM    | 进程使用的物理内存百分比                                     |
|  o   | VIRT    | 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES                |
|  p   | SWAP    | 进程使用的虚拟内存中，被换出的大小，单位kb。                 |
|  q   | RES     | 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA    |
|  r   | CODE    | 可执行代码占用的物理内存大小，单位kb                         |
|  s   | DATA    | 可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb    |
|  t   | SHR     | 共享内存大小，单位kb                                         |
|  u   | nFLT    | 页面错误次数                                                 |
|  v   | nDRT    | 最后一次写入到现在，被修改过的页面数。                       |
|  w   | S       | 进程状态(D=不可中断的睡眠状态,R=运行,S=睡眠,T=跟踪/停止,Z=僵尸进程) |
|  x   | COMMAND | 命令名/命令行                                                |
|  y   | WCHAN   | 若该进程在睡眠，则显示睡眠中的系统函数名                     |
|  z   | Flags   | 任务标志，参考 sched.h                                       |

默认情况下仅显示比较重要的 PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND 列。可以通过下面的快捷键来更改显示内容。

- 更改显示内容
   通过 f 键可以选择显示的内容。按 f 键之后会显示列的列表，按 a-z 即可显示或隐藏对应的列，最后按回车键确定。
- 更改列显示顺序
   按 o 键可以改变列的显示顺序。按小写的 a-z 可以将相应的列向右移动，而大写的 A-Z 可以将相应的列向左移动。最后按回车键确定。
- 按列排序
   按大写的 F 或 O 键，然后按 a-z 可以将进程按照相应的列进行排序。而大写的 R 键可以将当前的排序倒转。

